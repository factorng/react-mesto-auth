{"version":3,"sources":["images/logo.svg","images/info-tool-tip-success.svg","images/info-tool-tip-failure.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","utils/utils.js","utils/Api.js","utils/auth.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","components/App.js","index.js"],"names":["module","exports","Header","userData","signOut","className","src","logoPath","alt","path","to","exact","email","onClick","type","CurrentUserContext","React","createContext","Card","card","onCardLike","onCardDelete","onCardClick","currentUser","useContext","console","log","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","length","Main","onEditProfile","onAddPlace","onEditAvatar","handleCardClick","handleCardLike","handleCardDelete","cards","avatar","about","aria-label","map","index","key","Footer","ImagePopup","isOpen","onClose","toString","PopupWithForm","formName","onSubmit","title","children","buttonText","method","action","noValidate","EditProfilePopup","onUpdateUser","isButtonProgress","useState","setName","occupation","setOccupation","useEffect","e","preventDefault","id","value","onChange","target","placeholder","minLength","maxLength","pattern","required","EditAvatarPopup","onUpdateAvatar","inputRef","useRef","current","ref","defaultValue","AddPlacePopup","onAddCard","placeName","setPlaceName","placeLink","setPlaceLink","ConfirmDeletePopup","onSubmitClick","apiSettings","url","auth","localStorage","getItem","api","settings","this","baseUrl","fetch","headers","Authorization","then","result","ok","json","Promise","reject","status","body","JSON","stringify","newAvatar","res","statusText","BASE_URL","defaultUser","Login","setEmail","password","setPassword","Register","ProtectedRoute","Component","component","props","loggedIn","InfoTooltip","isOK","success","failure","App","setIsButtonProgress","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","cardToDelete","setCardToDelete","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setUserData","history","useHistory","tokenCheck","useCallback","jwt","Accept","credentials","Error","push","catch","err","closeAllPopups","all","getUserInfo","getInitialCards","Provider","removeItem","token","setItem","changeLikeCardStatus","newCard","newCards","c","cardDelete","updateUserProfile","finally","addNewCard","setUserAvatar","deleteCard","filter","ReactDOM","render","StrictMode","document","querySelector"],"mappings":"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","file":"static/js/main.3f3d5004.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.c6f11019.svg\";","module.exports = __webpack_public_path__ + \"static/media/info-tool-tip-success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/info-tool-tip-failure.f10ac534.svg\";","import React from 'react';\nimport { Link, Route } from 'react-router-dom';\nimport logoPath from '../images/logo.svg';\n\nfunction Header({ userData, signOut }) {\n  return (\n        <header className=\"header\">\n            <img src={logoPath} alt=\"логотип Место\" className=\"header__logo\" />\n            <Route path=\"/signup\">\n              <Link to=\"/signin\" className=\"header__link\">Войти</Link>\n            </Route>\n            <Route path=\"/signin\">\n              <Link to=\"/signup\" className=\"header__link\">Регистрация</Link>\n            </Route>\n            <Route exact path=\"/\">\n                <p className=\"header__account\">{userData && userData.email}\n                  <button className=\"header__button\" onClick={signOut} type=\"button\">Выйти</button>\n                </p>\n            </Route>\n        </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card({\n  card, onCardLike, onCardDelete, onCardClick,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  console.log('card', card);\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner === currentUser._id;/// ///////////////////card.owner._id\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (`place__button-delete ${isOwn ? '' : 'place__button-delete_hidden'}`);\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some((i) => i === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (`place__button-like ${isLiked ? 'place__button-like_active' : ''}`);\n\n  return (\n    <div className=\"place\">\n      <img\n        src={card.link}\n        alt={card.name}\n        className=\"place__image\"\n        onClick={() => onCardClick(card)}\n      />\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={() => onCardDelete(card)} />\n      <div className=\"place__description\">\n        <h3 className=\"place__title\">{card.name}</h3>\n        <div className=\"place__like\">\n          <button className={cardLikeButtonClassName} type=\"button\" onClick={() => onCardLike(card)}/>\n          <p className=\"place__like-count\">{card.likes.length}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({\n  onEditProfile, onAddPlace, onEditAvatar, handleCardClick, handleCardLike, handleCardDelete, cards,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  console.log('curUser!!!', currentUser);\n\n  return (\n        <main>\n            <section className=\"profile\">\n                <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__logo\" />\n                <div className=\"profile__avatar-hover\" onClick={onEditAvatar}/>\n                <div className=\"profile__info\">\n                <div className=\"profile__user\">\n                    <h3 className=\"profile__name\">{currentUser.name}</h3>\n                    <p className=\"profile__occupation\">{currentUser.about}</p>\n                </div>\n                <button className=\"profile__edit-button\" type=\"button\" onClick={onEditProfile}/>\n                </div>\n                <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace}/>\n            </section>\n            <section className=\"places\" aria-label=\"Элементы\">\n                {(cards.map((card, index) => <Card key={index} onCardLike={handleCardLike} onCardDelete={handleCardDelete} card={card} onCardClick={handleCardClick}/>))}\n            </section>\n        </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\n        </footer>\n  );\n}\nexport default Footer;\n","import React from 'react';\n\nfunction ImagePopup({\n  isOpen, link, name, onClose,\n}) {\n  return (\n        <div className={(isOpen ? 'popup show-photo popup_open' : 'popup show-photo')}>\n            <div className=\"show-photo__window\">\n            <button\n                className=\"popup__button-close show-photo__button-close\"\n                type=\"button\"\n                aria-label=\"закрыть\"\n                onClick={onClose}\n            />\n            <img\n                src={link.toString()}\n                alt={name}\n                className=\"show-photo__image\"\n            />\n            <p className=\"show-photo__title\">{name}</p>\n            </div>\n        </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\n\nfunction PopupWithForm({\n  isOpen, className, formName, onSubmit, onClose, title, children, buttonText,\n}) {\n  return (\n      <div className={(isOpen ? `popup  ${className} popup_open` : `popup  ${className}`)}>\n        <form\n          className={`popup__form ${formName}`}\n          method=\"post\"\n          action=\"#\"\n          noValidate\n          onSubmit={onSubmit}\n        >\n          <button\n            className=\"popup__button-close\"\n            type=\"button\"\n            aria-label=\"закрыть\"\n            onClick={onClose}\n          />\n          <h3 className=\"popup__title\">{title}</h3>\n          {children}\n          <button\n            className=\"popup__button-submit\"\n            type=\"submit\"\n          >\n            {buttonText}\n          </button>\n        </form>\n      </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({\n  isOpen, onClose, onUpdateUser, isButtonProgress,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [occupation, setOccupation] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setOccupation(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser({\n      name,\n      occupation,\n    });\n  }\n\n  function handleClose() {\n    onClose();\n    setName(currentUser.name);\n    setOccupation(currentUser.about);\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={handleClose}\n      title=\"Редактировать профиль\"\n      buttonText={isButtonProgress ? 'Сохранение...' : 'Сохранить'}\n      onSubmit={handleSubmit}\n    >\n        <>\n          <div className=\"popup__input-field\">\n            <input\n              id=\"input-name\"\n              className=\"popup__input edit-profile__input-name\"\n              type=\"text\"\n              value={name || ''}\n              onChange={(e) => setName(e.target.value)}\n              name=\"name\"\n              placeholder=\"Введите имя\"\n              minLength={2}\n              maxLength={40}\n              pattern=\"^[A-Za-zА-ЯЁа-яё -]+$\"\n              required\n            />\n            <span id=\"input-name-error\" className=\"popup__input-error\" />\n          </div>\n          <div className=\"popup__input-field\">\n            <input\n              id=\"input-occupation\"\n              className=\"popup__input edit-profile__input-occupation\"\n              type=\"text\"\n              value={occupation || ''}\n              onChange={(e) => setOccupation(e.target.value)}\n              name=\"occupation\"\n              placeholder=\"Род занятий\"\n              minLength={2}\n              maxLength={200}\n              required\n            />\n            <span id=\"input-occupation-error\" className=\"popup__input-error\" />\n          </div>\n        </>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React, { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({\n  isOpen, onClose, onUpdateAvatar, isButtonProgress,\n}) {\n  const inputRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: inputRef.current.value,\n    });\n  }\n  function handleClose() {\n    onClose();\n  }\n  useEffect(() => {\n    inputRef.current.value = '';\n  }, [isOpen]);\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      className=\"change-avatar\"\n      formName=\"change-avatar__form\"\n      title=\"Обновить аватар\"\n      buttonText={isButtonProgress ? 'Сохранение...' : 'Сохранить'}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__input-field\">\n        <input\n          className=\"popup__input change-avatar__input-link\"\n          ref={inputRef}\n          type=\"url\"\n          id=\"change-avatar__input-link\"\n          name=\"link\"\n          defaultValue=\"\"\n          placeholder=\"Ссылка на картинку\"\n          required\n        />\n        <span\n          id=\"change-avatar__input-link-error\"\n          className=\"popup__input-error\"\n        ></span>\n      </div>\n    </PopupWithForm>\n  );\n}\nexport default EditAvatarPopup;\n","import React, { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({\n  isOpen, onClose, onAddCard, isButtonProgress,\n}) {\n  const [placeName, setPlaceName] = React.useState('');\n  const [placeLink, setPlaceLink] = React.useState('');\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onAddCard({\n      placeName,\n      placeLink,\n    });\n    setPlaceLink('');\n    setPlaceName('');\n  }\n  function handleClose() {\n    onClose();\n  }\n\n  useEffect(() => {\n    setPlaceLink('');\n    setPlaceName('');\n  }, [isOpen]);\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      className=\"add-card\"\n      formName=\"add-card__form\"\n      title=\"Новое место\"\n      buttonText={isButtonProgress ? 'Сохранение...' : 'Создать'}\n      onSubmit={handleSubmit}\n      onClose={handleClose}\n    >\n        <div className=\"popup__input-field\">\n          <input\n            className=\"popup__input add-card__input-name\"\n            type=\"text\"\n            id=\"input-place-name\"\n            name=\"name\"\n            value={placeName}\n            onChange={(e) => setPlaceName(e.target.value)}\n            placeholder=\"Название\"\n            minLength={2}\n            maxLength={30}\n            required\n          />\n          <span id=\"input-place-name-error\" className=\"popup__input-error\" />\n        </div>\n        <div className=\"popup__input-field\">\n          <input\n            className=\"popup__input add-card__input-link\"\n            type=\"url\"\n            id=\"input-place-link\"\n            name=\"link\"\n            value={placeLink}\n            onChange={(e) => setPlaceLink(e.target.value)}\n            placeholder=\"Ссылка на картинку\"\n            required\n          />\n          <span id=\"input-place-link-error\" className=\"popup__input-error\" />\n        </div>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\n\nfunction ConfirmDeletePopup({\n  isOpen, onSubmitClick, onClose, isButtonProgress,\n}) {\n  function handleSubmit(e) {\n    e.preventDefault();\n    onSubmitClick();\n  }\n\n  return (\n        <div\n        className={\n            isOpen ? 'popup  confirmation popup_open' : 'popup  confirmation'\n        }\n        >\n        <form\n            className=\"popup__form confirmation__form\"\n            method=\"post\"\n            action=\"#\"\n            noValidate\n            onSubmit={handleSubmit}\n        >\n            <button\n            className=\"popup__button-close confirmation__button-close\"\n            type=\"button\"\n            aria-label=\"закрыть\"\n            onClick={onClose}\n            ></button>\n            <h3 className=\"popup__title\">Вы уверены?</h3>\n            <button className=\"popup__button-submit\" type=\"submit\" aria-label=\"Да\">\n                {isButtonProgress ? 'Удаление...' : 'Да'}\n            </button>\n        </form>\n        </div>\n  );\n}\n\nexport default ConfirmDeletePopup;\n","const apiSettings = {\n  url: 'http://localhost:3001',\n  auth: `Bearer ${localStorage.getItem('jwt')}`,\n};\nexport default apiSettings;\n","import apiSettings from './utils.js';\n\nexport class Api {\n  constructor(settings) {\n    this.baseUrl = settings.url;\n    this.auth = settings.auth;\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((result) => {\n        if (result.ok) {\n          return result.json();\n        }\n        return Promise.reject(`error${result.status}`);\n      });\n  }\n\n  getInitialCards() {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((result) => {\n        if (result.ok) {\n          return result.json();\n        }\n        return Promise.reject(`error${result.status}`);\n      });\n  }\n\n  updateUserProfile(name, about) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        Authorization: this.auth,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    })\n      .then((result) => {\n        if (result.ok) {\n          return result.json();\n        }\n        return Promise.reject(`error${result.status}`);\n      });\n  }\n\n  addNewCard(name, link) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'POST',\n      headers: {\n        Authorization: this.auth,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    })\n      .then((result) => result.json());\n  }\n\n  setUserAvatar(newAvatar) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        Authorization: this.auth,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        avatar: newAvatar,\n      }),\n    })\n      .then((result) => {\n        if (result.ok) {\n          return result.json();\n        }\n        return Promise.reject(`error${result.status}`);\n      });\n  }\n\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: {\n        Authorization: this.auth,\n      },\n    })\n      .then((result) => {\n        if (result.ok) {\n          return result.json();\n        }\n        return Promise.reject(`error${result.status}`);\n      });\n  }\n\n  changeLikeCardStatus(id, status) {\n    return fetch(`${this.baseUrl}/cards/likes/${id}`, {\n      method: `${(status) ? 'PUT' : 'DELETE'}`,\n      headers: {\n        Authorization: this.auth,\n      },\n    })\n      .then((res) => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status} ${res.statusText}`);\n      });\n  }\n}\n\nconst api = new Api(apiSettings);\n\nexport default api;\n","const BASE_URL = 'http://localhost:3001';\r\nconst defaultUser = {\r\n  name: 'Jhonny Cash',\r\n  avatar: 'https://upload.wikimedia.org/wikipedia/commons/f/f2/JohnnyCash1969.jpg',\r\n  about: 'singer',\r\n};\r\nexport const register = (email, password) => fetch(`${BASE_URL}/signup`, {\r\n  method: 'POST',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n  },\r\n  credentials: 'same-origin',\r\n  body: JSON.stringify({ email, password, ...defaultUser }),\r\n})\r\n  .then((res) => {\r\n    if (res.status !== 400) {\r\n      return res.json();\r\n    }\r\n    throw new Error('Некорректно заполнено одно из полей');\r\n  });\r\n\r\nexport const authorize = (email, password) => fetch(`${BASE_URL}/signin/`, {\r\n  method: 'POST',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n    Authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n  },\r\n  credentials: 'same-origin',\r\n  body: JSON.stringify({ email, password }),\r\n})\r\n  .then((res) => {\r\n    if (res.status === 200) {\r\n      return res.json();\r\n    }\r\n    if (res.status === 400) {\r\n      throw new Error('Не передано одно из полей');\r\n    }\r\n    if (res.status === 401) {\r\n      throw new Error('Пользователь с email не найден');\r\n    }\r\n    throw new Error(`Ошибка авторизации: ${res.status}`);\r\n  });\r\n\r\nexport const getContent = () => fetch(`${BASE_URL}/users/me`, {\r\n  method: 'GET',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n    Authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n  },\r\n  credentials: 'same-origin',\r\n})\r\n  .then((res) => {\r\n    console.log(res);\r\n    if (res.status === 200) {\r\n      return res.json();\r\n    }\r\n    if (res.status === 400) {\r\n      throw new Error('Токен не передан или передан не в том формате');\r\n    }\r\n    if (res.status === 401) {\r\n      throw new Error('Переданный токен некорректен');\r\n    }\r\n    throw new Error(`Ошибка токена: ${res.status}`);\r\n  });\r\n","import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\n\r\nfunction Login({\r\n  onSubmit,\r\n}) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!email || !password) {\r\n      return;\r\n    }\r\n    onSubmit(email, password);\r\n  }\r\n  useEffect(() => {\r\n    setEmail('');\r\n    setPassword('');\r\n  }, []);\r\n\r\n  return (\r\n    <div className='login-popup popup_open'>\r\n      <Header/>\r\n      <form className=\"login-popup__form\" method=\"post\" action=\"#\" noValidate onSubmit={handleSubmit}>\r\n        <h3 className=\"login-popup__title\">Вход</h3>\r\n        <input\r\n          className=\"login-popup__input\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          value={email || ''}\r\n        />\r\n        <input\r\n          className=\"login-popup__input\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          required\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          value={password || ''}\r\n        />\r\n        <button\r\n          className=\"login-popup__button-submit\"\r\n          type=\"submit\"\r\n          aria-label=\"Войти\"\r\n        >\r\n          Войти\r\n        </button>\r\n        <div className=\"login-popup__register\">\r\n          Ещё не зарегистрированы?\r\n          <Link to=\"/signup\" className=\"login-popup__link\">Регистрация</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useEffect } from 'react'; import { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\n\r\nfunction Register({\r\n  onSubmit,\r\n}) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onSubmit(email, password);\r\n  }\r\n  useEffect(() => {\r\n    setEmail('');\r\n    setPassword('');\r\n  }, []);\r\n\r\n  return (\r\n    <div className='login-popup popup_open'>\r\n      <Header/>\r\n      <form className=\"login-popup__form\" method=\"post\" action=\"#\" noValidate onSubmit={handleSubmit}>\r\n        <h3 className=\"login-popup__title\">Регистрация</h3>\r\n        <input\r\n          className=\"login-popup__input\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          value={email || ''}\r\n        />\r\n        <input\r\n          className=\"login-popup__input\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          required\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          value={password || ''}\r\n        />\r\n        <button\r\n          className=\"login-popup__button-submit\"\r\n          type=\"submit\"\r\n          aria-label=\"Войти\"\r\n        >\r\n          Войти\r\n        </button>\r\n        <div className=\"login-popup__register\">\r\n          Уже зарегистрированы?\r\n          <Link to=\"/signin\" className=\"login-popup__link\">Войти</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => (\r\n    <Route >\r\n      {\r\n        () => (props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"./sign-up\"/>)\r\n      }\r\n    </Route>\r\n);\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport success from '../images/info-tool-tip-success.svg';\r\nimport failure from '../images/info-tool-tip-failure.svg';\r\n\r\nfunction InfoTooltip({\r\n  isOpen, onClose, isOK,\r\n}) {\r\n  return (\r\n    <div className={(isOpen ? 'popup  popup_open' : 'popup ')}>\r\n          <div className=\"info-tooltip\">\r\n          <button\r\n                className=\"popup__button-close\"\r\n                type=\"button\"\r\n                aria-label=\"закрыть\"\r\n                onClick={onClose}\r\n            />\r\n            <img src={isOK ? success : failure}\r\n                 alt={isOK ? 'Успешная регистрация.' : 'Ошибка при регистрации'}\r\n                 className=\"popup__image_type_infoTooltip\"/>\r\n            <h2 className=\"popup__title_type_infoTooltip\">\r\n              {isOK ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n            </h2>\r\n          </div>\r\n        </div>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  Route, Switch, Redirect, useHistory,\n} from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ConfirmDeletePopup from './ConfirmDeletePopup';\nimport api from '../utils/Api';\nimport * as auth from '../utils/auth';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  const [isButtonProgress, setIsButtonProgress] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(\n    false,\n  );\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(\n    false,\n  );\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(\n    false,\n  );\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [cardToDelete, setCardToDelete] = useState('');\n  const [selectedCard, setSelectedCard] = React.useState({\n    isOpen: false,\n    name: '',\n    link: '',\n  });\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userData, setUserData] = React.useState(null);\n  const history = useHistory();\n\n  const tokenCheck = useCallback(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setUserData({\n              id: res._id,\n              email: res.email,\n            });\n            setLoggedIn(true);\n            history.push('/');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          setLoggedIn(false);\n          setIsInfoTooltipOpen(true);\n          history.push('/signin');\n        });\n    }\n  }, [history]);\n\n  React.useEffect(() => {\n    tokenCheck();\n  }, [loggedIn, tokenCheck]);\n\n  useEffect(() => {\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then(([userData, cards]) => {\n        console.log('userData', userData);\n        setCards(cards);\n        setCurrentUser(userData);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n        // Обновляем стейт\n        setCards(newCards);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n  function handleCardClick({ name, link }) {\n    setSelectedCard({\n      isOpen: true,\n      name,\n      link,\n    });\n  }\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n    setSelectedCard({\n      isOpen: false,\n      name: '',\n      link: '',\n    });\n    setIsInfoTooltipOpen(false);\n  }\n  function handleAddPlaceSubmit({ placeName, placeLink }) {\n    setIsButtonProgress(true);\n    api\n      .addNewCard(placeName, placeLink)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n      })\n      .then(() => setIsAddPlacePopupOpen(false))\n      .catch((err) => console.log(err))\n      .finally(() => setIsButtonProgress(false));\n  }\n\n  function handleUpdateUser({ name, occupation }) {\n    setIsButtonProgress(true);\n    api\n      .updateUserProfile(name, occupation)\n      .then((res) => {\n        setCurrentUser(res);\n      })\n      .then(() => setIsEditProfilePopupOpen(false))\n      .catch((err) => console.log(err))\n      .finally(() => setIsButtonProgress(false));\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    setIsButtonProgress(true);\n    api\n      .setUserAvatar(avatar)\n      .then((res) => {\n        setCurrentUser({ ...currentUser, avatar: res.avatar });\n        closeAllPopups();\n      })\n      .then(() => setIsEditAvatarPopupOpen(false))\n      .catch((err) => console.log(err))\n      .finally(() => setIsButtonProgress(false));\n  }\n  function handleCardDelete(cardDelete) {\n    setIsConfirmDeletePopupOpen(true);\n    setCardToDelete(cardDelete);\n  }\n\n  function handleCofirmDelete(cardDelete = cardToDelete) {\n    setIsButtonProgress(true);\n    api\n      .deleteCard(cardDelete._id)\n      .then(() => {\n        const newCards = cards.filter((card) => card._id !== cardDelete._id);\n        setCards(newCards);\n      })\n      .then(() => setIsConfirmDeletePopupOpen(false))\n      .catch((err) => console.log(err))\n      .finally(() => setIsButtonProgress(false));\n  }\n\n  function handleLogin(email, password) {\n    return auth.authorize(email, password)\n      .then((res) => {\n        if (res && res.token) {\n          localStorage.setItem('jwt', res.token);\n          tokenCheck();\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoggedIn(false);\n        setIsInfoTooltipOpen(true);\n      });\n  }\n\n  function handleRegister(email, password) {\n    return auth.register(email, password)\n      .then((res) => {\n        history.push('/signin');\n        setLoggedIn(true);\n        setIsInfoTooltipOpen(true);\n      })\n      .catch((err) => {\n        setIsInfoTooltipOpen(true);\n        console.log(err);\n      });\n  }\n\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    history.push('/signin');\n    setLoggedIn(false);\n  }\n\n  return (\n    <>\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header userData={userData} signOut={handleSignOut}/>\n        <Switch>\n          <Route path=\"/signin\">\n            <Login onSubmit={handleLogin}/>\n          </Route>\n          <Route path=\"/signup\">\n            <Register onSubmit={handleRegister} />\n          </Route>\n          <ProtectedRoute\n              exact path=\"/\"\n              loggedIn={loggedIn}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              handleCardClick={handleCardClick}\n              handleCardLike={handleCardLike}\n              handleCardDelete={handleCardDelete}\n              cards={cards}\n              component={Main}\n          />\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          isButtonProgress={isButtonProgress}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddCard={handleAddPlaceSubmit}\n          isButtonProgress={isButtonProgress}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          isButtonProgress={isButtonProgress}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <ImagePopup {...selectedCard} onClose={closeAllPopups} />\n        <ConfirmDeletePopup\n          isOpen={isConfirmDeletePopupOpen}\n          onClose={closeAllPopups}\n          onSubmitClick={handleCofirmDelete}\n          isButtonProgress={isButtonProgress}\n        />\n        <InfoTooltip isOpen={isInfoTooltipOpen} onClose={closeAllPopups} isOK={loggedIn}/>\n      </CurrentUserContext.Provider>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.querySelector('#root'),\n);\n"],"sourceRoot":""}